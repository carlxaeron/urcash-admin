(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"0b0a":function(t,e,a){},"72f3":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"bg-secondary myfont"},[a("Requests"),a("div",{staticClass:"q-pa-md"},[a("q-card",{staticClass:"my-card q-pa-md"},[a("q-table",{attrs:{title:"Voucher Purchases for Review","title-class":"text-h6 text-bold",data:t.data,columns:t.columns,"row-key":"date","binary-state-sort":"","no-data-label":"NO VOUCHER PURCHASES TO VERIFY AT THIS TIME"},scopedSlots:t._u([{key:"body",fn:function(e){return[a("q-tr",{attrs:{props:e}},[a("q-td",{key:"date",attrs:{props:e}},[t._v("\n          "+t._s(e.row.date)+"\n        ")]),a("q-td",{key:"merchant_name",attrs:{props:e}},[a("span",{},[t._v(" "+t._s(e.row.merchant_name))]),a("br")]),a("q-td",{key:"cost",attrs:{props:e}},[a("div",{staticClass:"text-pre-wrap"},[t._v(t._s(t.formatPrice(e.row.cost)))])]),a("q-td",{key:"payment_method",attrs:{props:e}},[a("div",{staticClass:"text-pre-wrap"},[t._v(t._s(e.row.payment_method))])]),a("q-td",{key:"status",attrs:{props:e}},[a("div",{staticClass:"text-pre-wrap text-secondary"},[t._v(t._s(e.row.status))])]),a("q-td",{key:"action",attrs:{props:e}},[a("q-btn",{attrs:{color:"primary"},on:{click:function(a){t.card=!0,t.imurl=e.row.proof_of_payment,t.tn=e.row.ref_number,t.dt=e.row.date,t.pn=e.row.mobile_number,t.mn=e.row.merchant_name,t.amoun=e.row.cost,t.pmthd=e.row.payment_method,t.vid=e.row.id}}},[a("i",{staticClass:"fa fa-eye",attrs:{left:""}}),a("div",{staticClass:"q-ml-xs"},[t._v(" View")])])],1)],1)]}}])})],1),a("q-dialog",{attrs:{maximized:t.maximizedToggle},model:{value:t.card,callback:function(e){t.card=e},expression:"card"}},[a("q-card",{staticClass:"my-card"},[a("q-card-section",{attrs:{horizontal:""}},[a("q-card-section",{staticClass:"bg-secondary"},[a("q-card-section",{staticClass:"q-pt-xs"},[a("div",{staticClass:"text-h6 q-mt-sm text-bold q-mb-xs"},[t._v("VIRIFY VOUCHER PURCHASE")]),a("q-item-section",[a("q-item-label",{staticClass:"text-bold"},[t._v("Transaction No.:")]),a("q-item-label",[t._v(t._s(t.tn))]),a("q-item-label",{staticClass:"text-bold"},[t._v("Date: ")]),a("q-item-label",[t._v(t._s(t.dt))]),a("q-item-label",{staticClass:"text-bold"},[t._v("Merchant Name: ")]),a("q-item-label",[t._v(t._s(t.mn))]),a("q-item-label",{staticClass:"text-bold"},[t._v("Phone Number: ")]),a("q-item-label",[t._v(t._s(t.pn))]),a("q-item-label",{staticClass:"text-bold "},[t._v("Amount")]),a("q-item-label",[t._v(t._s(t.amoun))]),a("q-item-label",{staticClass:"text-bold"},[t._v("Payment Method:")]),a("q-item-label",[t._v(t._s(t.pmthd))])],1)],1),a("q-card-actions",{staticClass:"justify-around",staticStyle:{width:"300px"},attrs:{vertical:""}},[a("q-btn",{attrs:{color:"info",label:"Verify Voucher"},on:{click:function(e){return t.accept(t.vid)}}}),a("q-btn",{attrs:{color:"negative",label:"Reject Voucher"},on:{click:function(e){return t.reject(t.vid)}}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"white","text-color":"black",label:"Close"}})],1)],1),a("div",{staticStyle:{width:"100%"}},[a("q-img",{staticClass:"float-right",attrs:{src:t.imbase+t.imurl}})],1)],1)],1)],1)],1)],1)},o=[],r=(a("5319"),a("0aef")),i={name:"PageIndex",components:{Requests:r["a"]},data(){return{vid:null,tn:null,dt:null,pn:null,mn:null,amoun:null,pmthd:null,maximizedToggle:!0,imbase:"http://api.markturtlehouse.dev/",imurl:"",card:!1,columns:[{name:"date",align:"center",label:"Date",field:"date",sortable:!0},{name:"merchant_name",align:"left",label:"Merchant Name",field:"merchant_name",sortable:!0},{name:"cost",align:"left",label:"Cost",field:"cost"},{name:"payment_method",align:"left",label:"Payment Method",field:"payment_method"},{name:"status",label:"Status",align:"left",field:"status"},{name:"action",label:"Proof of Payment",field:"proof_of_payment"}],data:[]}},methods:{accept(t){this.$q.dialog({title:"Confirm",message:"Are you sure you want to verify this voucher? Verifying this voucher will update the merchant`s voucher balance.",cancel:!0,persistent:!0}).onOk(()=>{this.$axios.post("voucher/"+t+"/verify ",{headers:{Authorization:"Bearer "+this.$q.sessionStorage.getItem("token")}}).then(t=>{this.card=!1,this.getVoucher_to_review(),this.$q.notify({message:" The voucher has been verified and the merchant`s voucher balance has been updated.",color:"info",icon:"warning"})}).catch(t=>{console.log(t.response)})}).onCancel(()=>{this.card=!1})},reject(t){this.$q.dialog({title:"Confirm",message:"Are you sure you want to reject this voucher? Make sure to contact the customer first before rejecting this purchase.",cancel:!0,persistent:!0}).onOk(()=>{this.$axios.post("voucher/"+t+"/reject ",{headers:{Authorization:"Bearer "+this.$q.sessionStorage.getItem("token")}}).then(t=>{this.card=!1,this.getVoucher_to_review(),this.$q.notify({message:"This voucher purchase has been rejected. An automated email will be sent to the customer.",color:"negative",icon:"warning"})}).catch(t=>{console.log(t.response)})}).onCancel(()=>{this.card=!1})},getVoucher_to_review(){this.$axios.post("voucher/orders/to-verify",{headers:{Authorization:"Bearer "+this.$q.sessionStorage.getItem("token")}}).then(t=>{console.log(t.data),this.data=t.data.results.orders}).catch(t=>{console.log(t.response)})},formatPrice(t){const e=(t/1).toFixed(2).replace(",",".");return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},created(){this.getVoucher_to_review()}},n=i,l=(a("8809"),a("2877")),c=a("9989"),d=a("f09f"),m=a("eaac"),h=a("bd08"),u=a("db86"),p=a("9c40"),b=a("24e8"),v=a("a370"),f=a("4074"),_=a("0170"),q=a("4b7e"),g=a("068f"),y=a("7f67"),w=a("eebe"),C=a.n(w),x=Object(l["a"])(n,s,o,!1,null,null,null);e["default"]=x.exports;C()(x,"components",{QPage:c["a"],QCard:d["a"],QTable:m["a"],QTr:h["a"],QTd:u["a"],QBtn:p["a"],QDialog:b["a"],QCardSection:v["a"],QItemSection:f["a"],QItemLabel:_["a"],QCardActions:q["a"],QImg:g["a"]}),C()(x,"directives",{ClosePopup:y["a"]})},8809:function(t,e,a){"use strict";var s=a("0b0a"),o=a.n(s);o.a}}]);