(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{"9fc4":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-page",{staticClass:"bg-secondary"},[e("div",{staticClass:"q-pa-md"},[e("q-card",{staticClass:"my-card q-pa-md q-pb-xl"},[e("q-table",{attrs:{title:"Sales By Barangay","title-class":"text-h6 text-bold",data:t.data,columns:t.columns,"row-key":"barangay","binary-state-sort":"","no-data-label":" No Data Available"},scopedSlots:t._u([{key:"top-right",fn:function(){return[e("vue-json-to-csv",{attrs:{"json-data":t.data,labels:{barangay:{title:"Barangay"},merchant_name:{title:"Merchant"},total_earnings:{title:"Earnings"}},"csv-title":"Report by Barangay",separator:";"}},[e("q-btn",{attrs:{color:"primary","icon-right":"archive",label:"Export to csv","no-caps":""}})],1),e("q-select",{staticClass:"q-ml-md q-mr-md",staticStyle:{width:"250px"},attrs:{debounce:"400",dense:"",options:t.targetlist,label:"Select Barangay"},on:{input:function(a){return t.getData()}},model:{value:t.target,callback:function(a){t.target=a},expression:"target"}}),e("q-input",{staticClass:"q-mr-md",attrs:{dense:"",debounce:"400",type:"date",max:t.date_to},on:{input:function(a){return t.getData()}},model:{value:t.date_from,callback:function(a){t.date_from=a},expression:"date_from"}}),t._v("\n         -\n        "),e("q-input",{staticClass:"q-ml-md",attrs:{dense:"",debounce:"400",type:"date",min:t.date_from},on:{input:function(a){return t.getData()}},model:{value:t.date_to,callback:function(a){t.date_to=a},expression:"date_to"}})]},proxy:!0},{key:"body",fn:function(a){return[e("q-tr",{attrs:{props:a}},[e("q-td",{key:"barangay",attrs:{props:a}},[t._v("\n            "+t._s(a.row.barangay)+"\n          ")]),e("q-td",{key:"merchant_name",attrs:{props:a}},[e("span",{},[t._v(" "+t._s(a.row.merchant_name))]),e("br")]),e("q-td",{key:"total_earnings",attrs:{props:a}},[e("div",{staticClass:"text-pre-wrap"},[t._v(t._s(a.row.total_earnings))])])],1)]}}])}),e("span",{staticClass:"text-bold text-h6 float-right"},[t._v("Total: "+t._s(t.total)+"  ")])],1)],1)])},n=[],r=e("055a"),o=e.n(r),l={name:"barangayReport",components:{VueJsonToCsv:o.a},data(){return{targetlist:[],date_from:null,date_to:null,target:null,total:0,columns:[{name:"barangay",align:"left",label:"Barangay",field:"barangay",sortable:!0},{name:"merchant_name",align:"left",label:"Merchant",field:"merchant_name",sortable:!0},{name:"total_earnings",align:"left",label:"Earnings",field:"total_earnings",sortable:!0}],data:[]}},methods:{getData(){null!==this.target&&null!==this.date_from&&null!==this.date_to&&this.$axios.post("sales/barangay",{barangay:this.target,from:this.date_from,to:this.date_to},{headers:{Authorization:"Bearer "+this.$q.sessionStorage.getItem("token"),"Content-Type":"application/json"}}).then(t=>{console.log(t.data),this.data=t.data.results.merchants,this.total=t.data.results.total_sales}).catch(t=>{t.response&&t.response.statusText&&alert(t.response.statusText),this.total=0,this.data=[],console.log(t.response),this.$q.notify({message:t.response.data.message,color:"negative",icon:"warning"})})},getBrgy(){this.$axios.get("addresses/barangay",{headers:{Authorization:"Bearer "+this.$q.sessionStorage.getItem("token"),"Content-Type":"application/json"}}).then(t=>{console.log(t.data),this.targetlist=t.data.results}).catch(t=>{t.response&&t.response.statusText&&alert(t.response.statusText),console.log(t.response)})}},created(){this.getBrgy()}},i=l,c=e("2877"),d=e("9989"),p=e("f09f"),g=e("eaac"),u=e("9c40"),m=e("ddd8"),b=e("27f9"),h=e("bd08"),y=e("db86"),_=e("eebe"),f=e.n(_),q=Object(c["a"])(i,s,n,!1,null,null,null);a["default"]=q.exports;f()(q,"components",{QPage:d["a"],QCard:p["a"],QTable:g["a"],QBtn:u["a"],QSelect:m["a"],QInput:b["a"],QTr:h["a"],QTd:y["a"]})}}]);