(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{"9f83":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-page",{staticClass:"bg-secondary"},[e("div",{staticClass:"q-pa-md"},[e("q-card",{staticClass:"my-card q-pa-md q-pb-xl"},[e("q-table",{attrs:{title:"Sales By Merchant","title-class":"text-h6 text-bold",data:t.data,columns:t.columns,"row-key":"merchant_name","binary-state-sort":"","no-data-label":" No Data Available"},scopedSlots:t._u([{key:"top-right",fn:function(){return[e("vue-json-to-csv",{attrs:{"json-data":t.data,labels:{merchant_name:{title:"Merchant"},quantities_sold:{title:"Sold Items"},total_sales_of_merchant:{title:"Total Sales"},total_transactions:{title:"Total Transactions"}},"csv-title":"Report by Merchant",separator:";"}},[e("q-btn",{attrs:{color:"primary","icon-right":"archive",label:"Export to csv","no-caps":""}})],1),e("q-select",{staticClass:"q-ml-md q-mr-md",staticStyle:{width:"250px"},attrs:{debounce:"400",dense:"",options:t.targetlist,label:"Select Merchant"},on:{input:function(a){return t.getData()}},model:{value:t.target,callback:function(a){t.target=a},expression:"target"}}),e("q-input",{staticClass:"q-mr-md",attrs:{dense:"",debounce:"400",type:"date",max:t.date_to},on:{input:function(a){return t.getData()}},model:{value:t.date_from,callback:function(a){t.date_from=a},expression:"date_from"}}),t._v("\n         -\n        "),e("q-input",{staticClass:"q-ml-md",attrs:{dense:"",debounce:"400",type:"date",min:t.date_from},on:{input:function(a){return t.getData()}},model:{value:t.date_to,callback:function(a){t.date_to=a},expression:"date_to"}})]},proxy:!0},{key:"body",fn:function(a){return[e("q-tr",{attrs:{props:a}},[e("q-td",{key:"merchant_name",attrs:{props:a}},[t._v("\n            "+t._s(a.row.merchant_name)+"\n          ")]),e("q-td",{key:"quantities_sold",attrs:{props:a}},[e("span",{},[t._v(" "+t._s(a.row.quantities_sold))]),e("br")]),e("q-td",{key:"total_transactions",attrs:{props:a}},[e("div",{staticClass:"text-pre-wrap"},[t._v(t._s(a.row.total_transactions))])]),e("q-td",{key:"total_sales_of_merchant",attrs:{props:a}},[e("div",{staticClass:"text-pre-wrap"},[t._v(t._s(a.row.total_sales_of_manufacturer))])])],1)]}}])})],1)],1)])},n=[],o=e("055a"),r=e.n(o),l={name:"merchantReport",components:{VueJsonToCsv:r.a},data(){return{targetlist:[],date_from:null,date_to:null,target:null,columns:[{name:"merchant_name",align:"left",label:"Merchant",field:"merchant_name",sortable:!0},{name:"quantities_sold",align:"left",label:"Sold Items",field:"quantities_sold",sortable:!0},{name:"total_transactions",align:"left",label:"Total Transactions",field:"total_transactions",sortable:!0},{name:"total_sales_of_merchant",align:"left",label:"Total Sales",field:"total_sales_of_manufacturer",sortable:!0}],data:[]}},methods:{getData(){null!==this.target&&null!==this.date_from&&null!==this.date_to&&this.$axios.post("sales/merchants",{merchant_name:this.target,from:this.date_from,to:this.date_to},{headers:{Authorization:"Bearer "+this.$q.sessionStorage.getItem("token"),"Content-Type":"application/json"}}).then(t=>{console.log(t.data),this.data=t.data.results.merchant,console.log(this.data)}).catch(t=>{t.response&&t.response.statusText&&alert(t.response.statusText),this.data=[],console.log(t.response),this.$q.notify({message:t.response.data.message,color:"negative",icon:"warning"})})},getMerchant(){this.$axios.get("shops/merchant_names",{headers:{Authorization:"Bearer "+this.$q.sessionStorage.getItem("token"),"Content-Type":"application/json"}}).then(t=>{console.log(t.data),this.targetlist=t.data.results}).catch(t=>{t.response&&t.response.statusText&&alert(t.response.statusText),console.log(t.response)})}},created(){this.getMerchant()}},i=l,c=e("2877"),d=e("9989"),m=e("f09f"),p=e("eaac"),u=e("9c40"),_=e("ddd8"),h=e("27f9"),f=e("bd08"),g=e("db86"),b=e("eebe"),q=e.n(b),v=Object(c["a"])(i,s,n,!1,null,null,null);a["default"]=v.exports;q()(v,"components",{QPage:d["a"],QCard:m["a"],QTable:p["a"],QBtn:u["a"],QSelect:_["a"],QInput:h["a"],QTr:f["a"],QTd:g["a"]})}}]);