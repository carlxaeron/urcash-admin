(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{ba07:function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("q-page",{staticClass:"bg-secondary"},[t("Requests"),t("div",{staticClass:"q-pa-md"},[t("q-card",{staticClass:"my-card q-pa-md"},[t("q-table",{attrs:{title:"Merchants to Review","title-class":"text-h6 text-bold",data:e.data,columns:e.columns,"row-key":"date","binary-state-sort":"","no-data-label":" No Merchants  to Review at this Time"},scopedSlots:e._u([{key:"body",fn:function(s){return[t("q-tr",{attrs:{props:s}},[t("q-td",{key:"date",attrs:{props:s}},[e._v("\n          "+e._s(s.row.created_at)+"\n        ")]),t("q-td",{key:"shop_name",attrs:{props:s}},[t("span",{},[e._v(" "+e._s(s.row.reg_bus_name))]),t("br")]),t("q-td",{key:"shop_address",attrs:{props:s}},[t("div",{staticClass:"text-pre-wrap"},[e._v(e._s(s.row.business_address)+" "+e._s(s.row.business_street)+"  "+e._s(s.row.business_barangay)+" "+e._s(s.row.business_city)+" "+e._s(s.row.business_province)+" ")])]),t("q-td",{key:"action",attrs:{props:s}},[t("q-btn",{attrs:{color:"info"},on:{click:function(t){e.imurl="http://api.g2g.com/"+s.row.image_path,e.business_address=s.row.business_address,e.business_barangay=s.row.business_barangay,e.business_street=s.row.business_street,e.business_city=s.row.business_city,e.business_province=s.row.business_province,e.date=s.row.created_at,e.document_submitted=s.row.document_submitted,e.mobile_number=s.row.mobile_number,e.email=s.row.email,e.reg_bus_name=s.row.reg_bus_name,e.verification_request_id=s.row.verification_request_id,e.merchdetails=!0}}},[t("div",{staticClass:"q-ml-xs"},[e._v(" View")])])],1)],1)]}}])})],1),t("q-dialog",{model:{value:e.merchdetails,callback:function(s){e.merchdetails=s},expression:"merchdetails"}},[t("q-card",{staticStyle:{"max-width":"350px",width:"100%"}},[t("div",{staticStyle:{height:"380px"}},[t("q-img",{attrs:{src:e.imurl}})],1),t("q-card-section",[t("q-btn",{staticClass:"absolute",staticStyle:{top:"0",right:"20px",transform:"translateY(-50%)"},attrs:{fab:"",color:"primary"}},[t("i",{staticClass:"fa fa-award"})])],1),t("q-card-section",{staticClass:"q-py-none"},[t("span",{staticClass:"text-grey text-caption"},[e._v("  "+e._s(e.document_submitted)+" ")]),t("div",{staticClass:"text-subtitle1"},[e._v("\n          "+e._s(e.reg_bus_name)+"\n        ")]),t("div",{staticClass:"text-caption text-grey"},[e._v("\n         "+e._s(e.business_address)+" "+e._s(e.business_street)+"  "+e._s(e.business_barangay)+" "+e._s(e.business_city)+" "+e._s(e.business_province)),t("br"),e._v("\n         "+e._s(e.mobile_number)),t("br"),e._v("\n         "+e._s(e.email)+"\n\n        ")])]),t("q-separator"),t("q-card-actions",{attrs:{align:"right"}},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{size:"sm",color:"info",label:"Approve"},on:{click:function(s){return e.accept(e.verification_request_id)}}}),t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{size:"sm",color:"negative",label:"Reject"},on:{click:function(s){return e.reject(e.verification_request_id)}}})],1)],1)],1)],1)],1)},i=[],n=t("0aef"),r={name:"merchantVerify",components:{Requests:n["a"]},data(){return{verification_request_id:null,merchdetails:!1,imurl:"",business_address:null,business_street:null,business_barangay:null,business_city:null,business_province:null,date:null,document_submitted:null,mobile_number:null,email:null,reg_bus_name:null,columns:[{name:"date",align:"left",label:"Date",field:"created_at",sortable:!0},{name:"shop_name",align:"left",label:"Registered Business Name",field:"reg_bus_name",sortable:!0},{name:"shop_address",align:"left",label:"Address",field:"shop_address",sortable:!0},{name:"action",align:"left",label:"Action",field:"action"}],data:[]}},methods:{reject(e){this.$q.dialog({title:"Confirm reject",message:"Are you sure you want to reject this request? The merchant will not be verified.",cancel:!0,persistent:!0}).onOk(()=>{this.$axios.post("verification_requests/"+e+"/update",{is_accepted:0},{headers:{Authorization:"Bearer "+this.$q.sessionStorage.getItem("token")}}).then(e=>{this.getUnverified(),this.$q.notify({message:"Request rejected successfully",color:"info",icon:"warning"})}).catch(e=>{console.log(e.response)})}).onCancel(()=>{})},accept(e){this.$q.dialog({title:"Confirm Approve",message:"Are you sure you want to approve this request?",cancel:!0,persistent:!0}).onOk(()=>{this.$axios.post("verification_requests/"+e+"/update",{is_accepted:1},{headers:{Authorization:"Bearer "+this.$q.sessionStorage.getItem("token")}}).then(e=>{this.getUnverified(),this.$q.notify({message:"Request approved successfully",color:"info",icon:"warning"})}).catch(e=>{console.log(e.response)})}).onCancel(()=>{})},getUnverified(){this.$axios.get("shops/unverified",{headers:{Authorization:"Bearer "+this.$q.sessionStorage.getItem("token"),"Content-Type":"application/json"}}).then(e=>{console.log(e.data),this.data=e.data.results.merchants}).catch(e=>{console.log(e.response)})}},created(){this.getUnverified()}},o=r,c=t("2877"),l=t("9989"),u=t("f09f"),d=t("eaac"),_=t("bd08"),p=t("db86"),b=t("9c40"),m=t("24e8"),h=t("068f"),g=t("a370"),f=t("eb85"),v=t("4b7e"),q=t("7f67"),w=t("eebe"),y=t.n(w),C=Object(c["a"])(o,a,i,!1,null,null,null);s["default"]=C.exports;y()(C,"components",{QPage:l["a"],QCard:u["a"],QTable:d["a"],QTr:_["a"],QTd:p["a"],QBtn:b["a"],QDialog:m["a"],QImg:h["a"],QCardSection:g["a"],QSeparator:f["a"],QCardActions:v["a"]}),y()(C,"directives",{ClosePopup:q["a"]})}}]);