(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[22],{"372d":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticClass:"bg-secondary"},[a("Requests"),a("div",{staticClass:"q-pa-md"},[a("q-card",{staticClass:"my-card q-pa-md"},[a("q-table",{attrs:{title:"Products to Review","title-class":"text-h6 text-bold",data:e.data,columns:e.columns,"row-key":"date","binary-state-sort":"","no-data-label":" No Products  to Review at this Time"},scopedSlots:e._u([{key:"body",fn:function(t){return[a("q-tr",{attrs:{props:t}},[a("q-td",{key:"date",attrs:{props:t}},[e._v("\n          "+e._s(t.row.created_at)+"\n        ")]),a("q-td",{key:"ean",attrs:{props:t}},[a("span",{},[e._v(" "+e._s(t.row.ean))]),a("br")]),a("q-td",{key:"productname",attrs:{props:t}},[a("div",{staticClass:"text-pre-wrap"},[e._v(e._s(t.row.name))])]),a("q-td",{key:"merchantname",attrs:{props:t}},[a("div",{staticClass:"text-pre-wrap"},[e._v(e._s(t.row.manufacturer_name))])]),a("q-td",{key:"action",attrs:{props:t}},[a("q-btn",{staticClass:"q-mr-md",attrs:{color:"negative"},on:{click:function(a){return e.reject(t.row.verification_request_id)}}},[a("div",{staticClass:"q-ml-xs"},[e._v(" Reject")])]),a("q-btn",{attrs:{color:"info"},on:{click:function(a){return e.accept(t.row.verification_request_id)}}},[a("div",{staticClass:"q-ml-xs"},[e._v(" Verify")])])],1)],1)]}}])})],1)],1)],1)},n=[],o=a("0aef"),r={name:"PageIndex",components:{Requests:o["a"]},data(){return{columns:[{name:"date",align:"left",label:"Date",field:"created_at",sortable:!0},{name:"ean",align:"left",label:"EAN#",field:"ean",sortable:!0},{name:"productname",align:"left",label:"Product Name",field:"name"},{name:"merchantname",align:"left",label:"Manufacturer",field:"manufacturer_name"},{name:"action",align:"left",label:"Action",field:"action"}],data:[]}},methods:{reject(e){this.$q.dialog({title:"Confirm",message:"Are you sure you want to reject this product? The product will not be available.",cancel:!0,persistent:!0}).onOk(()=>{this.$axios.post("verification_requests/"+e+"/update",{is_accepted:0},{headers:{Authorization:"Bearer "+this.$q.sessionStorage.getItem("token")}}).then(e=>{this.getUnverified(),this.$q.notify({message:"Product rejected successfully",color:"info",icon:"warning"})}).catch(e=>{console.log(e.response)})}).onCancel(()=>{})},accept(e){this.$q.dialog({title:"Confirm",message:"Are you sure you want to verify this product?",cancel:!0,persistent:!0}).onOk(()=>{this.$axios.post("verification_requests/"+e+"/update",{is_accepted:1},{headers:{Authorization:"Bearer "+this.$q.sessionStorage.getItem("token")}}).then(e=>{this.getUnverified(),this.$q.notify({message:"Product verified successfully",color:"info",icon:"warning"})}).catch(e=>{console.log(e.response)})}).onCancel(()=>{})},getUnverified(){this.$axios.get("products/unverified",{headers:{Authorization:"Bearer "+this.$q.sessionStorage.getItem("token"),"Content-Type":"application/json"}}).then(e=>{console.log(e.data),this.data=e.data.results.products}).catch(e=>{console.log(e.response)})}},created(){this.getUnverified()}},i=r,c=a("2877"),l=a("9989"),d=a("f09f"),u=a("eaac"),p=a("bd08"),f=a("db86"),m=a("9c40"),h=a("eebe"),g=a.n(h),q=Object(c["a"])(i,s,n,!1,null,null,null);t["default"]=q.exports;g()(q,"components",{QPage:l["a"],QCard:d["a"],QTable:u["a"],QTr:p["a"],QTd:f["a"],QBtn:m["a"]})}}]);