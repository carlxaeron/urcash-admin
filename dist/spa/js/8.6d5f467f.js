(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"0d9f":function(e,t,s){},aa64:function(e,t,s){"use strict";var a=s("0d9f"),i=s.n(a);i.a},d687:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",{staticClass:"bg-secondary"},[s("div",{staticClass:"q-pa-md"},[s("q-card",{staticClass:"my-card q-pa-md"},[s("q-table",{attrs:{title:"Pending Inquiries",dense:"",data:e.data,columns:e.columns,"row-key":"date","binary-state-sort":"",filter:e.filter,"no-data-label":" No Pending Inquiries"},scopedSlots:e._u([{key:"top-right",fn:function(){return[s("q-input",{attrs:{borderless:"",dense:"",debounce:"400",placeholder:"Search"},scopedSlots:e._u([{key:"append",fn:function(){return[s("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"body",fn:function(t){return[s("q-tr",{attrs:{props:t}},[s("q-td",{key:"date",attrs:{props:t}},[e._v("\n          "+e._s(t.row.created_at)+"\n        ")]),s("q-td",{key:"mobile",attrs:{props:t}},[s("div",{staticClass:"text-pre-wrap"},[e._v(e._s(t.row.mobile_number))])]),s("q-td",{key:"email",attrs:{props:t}},[s("div",{staticClass:"text-pre-wrap"},[e._v(e._s(t.row.email))])]),s("q-td",{key:"priority",attrs:{props:t}},[s("div",{staticClass:"text-pre-wrap"},[e._v(e._s(t.row.priority))])]),s("q-td",{key:"Action",attrs:{props:t}},[s("q-btn",{attrs:{color:"primary"},on:{click:function(s){e.get_date=t.row.created_at,e.get_name=t.row.name,e.get_reference_number=t.row.reference_number,e.get_description=t.row.description,e.get_email=t.row.email,e.get_issue=t.row.issue,e.get_mobile_number=t.row.mobile_number,e.get_id=t.row.id,e.view_inq=!0}}},[s("div",{staticClass:"q-ml-xs"},[e._v("View")])])],1)],1)]}}])})],1),s("q-dialog",{attrs:{persistent:"","transition-show":"flip-down","transition-hide":"flip-up"},model:{value:e.view_inq,callback:function(t){e.view_inq=t},expression:"view_inq"}},[s("q-card",{staticStyle:{"max-width":"300px",width:"100%"}},[s("q-bar",[s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[s("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Close")])],1)],1),s("q-card-section",[s("div",{staticClass:"text-h6 text-bold"},[e._v("Details")])]),s("q-card-section",{staticClass:"q-pt-none"},[s("div",{staticClass:"text-subtitle1"},[e._v("\n          Date\n        ")]),s("div",{staticClass:"text-caption text-bold"},[e._v("\n       "+e._s(e.get_date)+"\n        ")]),s("q-separator"),s("div",{staticClass:"text-subtitle1"},[e._v("\n          Reference No.\n        ")]),s("div",{staticClass:"text-caption text-bold"},[e._v("\n         "+e._s(e.get_reference_number)+"\n        ")]),s("q-separator"),s("div",{staticClass:"text-subtitle1"},[e._v("\n          Name\n        ")]),s("div",{staticClass:"text-caption text-bold"},[e._v("\n         "+e._s(e.get_name)+"\n        ")]),s("q-separator"),s("div",{staticClass:"text-subtitle1"},[e._v("\n          Mobile Number\n        ")]),s("div",{staticClass:"text-caption text-bold"},[e._v("\n         "+e._s(e.get_mobile_number)+"\n        ")]),s("q-separator"),s("div",{staticClass:"text-subtitle1"},[e._v("\n          Email\n        ")]),s("div",{staticClass:"text-caption text-bold"},[e._v("\n         "+e._s(e.get_email)+"\n        ")]),s("q-separator"),s("div",{staticClass:"text-subtitle1"},[e._v("\n        Issue\n        ")]),s("div",{staticClass:"text-caption text-bold"},[e._v("\n          "+e._s(e.get_issue)+"\n        ")]),s("q-separator"),s("div",{staticClass:"text-subtitle1"},[e._v("\n          Description\n        ")]),s("div",{staticClass:"text-caption text-bold"},[e._v("\n         "+e._s(e.get_description)+"\n        ")]),s("q-separator")],1),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{attrs:{color:"info",label:"Respond"},on:{click:function(t){e.composer=!0}}}),s("q-btn",{attrs:{color:"primary",label:"Resolve"},on:{click:function(t){return e.resolve(e.get_id)}}})],1)],1)],1),s("q-dialog",{attrs:{persistent:""},model:{value:e.composer,callback:function(t){e.composer=t},expression:"composer"}},[s("q-card",{staticStyle:{"min-width":"350px"}},[s("q-card-section",[s("div",{staticClass:"text-h6"},[e._v("Write a response")])]),s("q-card-section",{staticClass:"q-pt-none"},[s("q-input",{ref:"message",attrs:{type:"textarea","input-class":"text-h6",autofocus:"",rules:[function(e){return!!e||"Required"}]},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1),s("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[s("q-btn",{attrs:{color:"negative",label:"Cancel"},on:{click:function(t){e.composer=!1}}}),s("q-btn",{attrs:{label:"Send",color:"info"},on:{click:function(t){return e.send()}}})],1)],1)],1)],1)])},i=[],n={name:"PageALS",data(){return{composer:!1,message:null,get_name:null,get_id:null,get_date:null,get_description:null,get_email:null,get_issue:null,get_mobile_number:null,get_reference_number:null,view_inq:!1,filter:"",columns:[{name:"date",align:"left",label:"Date",field:"created_at",sortable:!0},{name:"mobile",align:"left",label:"Mobile #",field:"mobile_number"},{name:"email",align:"left",label:"Email",field:"email"},{name:"priority",align:"left",label:"Priority",field:"priority",sortable:!0},{name:"Action",align:"left",label:"Action",field:"Action",sortable:!0}],data:[]}},methods:{send(){this.$refs.message.validate(),this.$refs.message.hasError||this.$axios.post("support_tickets/compose",{message:this.message,reference_number:this.get_reference_number},{headers:{Authorization:"Bearer "+this.$q.sessionStorage.getItem("token"),"Content-Type":"application/json"}}).then(e=>{this.$q.notify({message:"Message sent successfully!",color:"info",icon:"warning"}),this.composer=!1}).catch(e=>{console.log(e.response),this.$q.notify({message:"Failed to sent!",color:"negative",icon:"warning"}),this.composer=!1})},resolve(e){this.$q.dialog({title:"Confirm to resolve!",message:"The user`s issue will now be resolved",cancel:!0,persistent:!0}).onOk(()=>{this.$axios.post("support_tickets/"+e+"/update",{headers:{Authorization:"Bearer "+this.$q.sessionStorage.getItem("token")}}).then(e=>{this.view_inq=!1,console.log(e.data),this.getData(),this.$q.notify({message:"The user`s issue successfully resolved.",color:"info",icon:"warning"})}).catch(e=>{console.log(e.response)})}).onCancel(()=>{})},getData(){this.$axios.get("support_tickets/status/open",{headers:{Authorization:"Bearer "+this.$q.sessionStorage.getItem("token"),"Content-Type":"application/json"}}).then(e=>{console.log(e.data),this.data=e.data.results}).catch(e=>{console.log(e.response)})}},created(){this.getData()}},o=n,r=(s("aa64"),s("2877")),l=s("9989"),c=s("f09f"),d=s("eaac"),p=s("27f9"),u=s("0016"),m=s("bd08"),_=s("db86"),g=s("9c40"),b=s("24e8"),f=s("d847"),v=s("2c91"),q=s("05c0"),h=s("a370"),x=s("eb85"),w=s("4b7e"),C=s("7f67"),y=s("eebe"),k=s.n(y),Q=Object(r["a"])(o,a,i,!1,null,null,null);t["default"]=Q.exports;k()(Q,"components",{QPage:l["a"],QCard:c["a"],QTable:d["a"],QInput:p["a"],QIcon:u["a"],QTr:m["a"],QTd:_["a"],QBtn:g["a"],QDialog:b["a"],QBar:f["a"],QSpace:v["a"],QTooltip:q["a"],QCardSection:h["a"],QSeparator:x["a"],QCardActions:w["a"]}),k()(Q,"directives",{ClosePopup:C["a"]})}}]);